<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ddzlancamento" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="95d463c0-ef51-4bfe-ae42-2b8cb0e9bd15">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="linha" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="dataini" class="java.util.Date">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="datafim" class="java.util.Date">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="logo" class="java.io.InputStream">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="flag" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="perfil" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
     DDZ."ID" AS DDZ_ID,
     DDZ."DATA_INPUT" AS DATA_INPUT,
     DDZ."HORA_INPUT" AS HORA_INPUT,
     DDZ."OBSERVACAO" AS OBSERVACAO,
     DDZ."TURNO" AS TURNO,
     DDZ."ID_CAUSA_ID" AS ID_CAUSA_ID,
     DDZ."ID_M_MATERIAL" AS ID_M_MATERIAL,
     DDZ."QTD_SCRAP" AS QTD_SCRAP,
     DDZ."QTD_SCRAP_REAIS" AS QTD_SCRAP_REAIS,
     DDZ."QTD_SCRAP_KG" AS QTD_SCRAP_KG,
     DDZ."VELOCIDADE" AS VELOCIDADE,
     DDZ."PESO" AS PESO,
     DDZ."DATA_REAL" AS DATA_REAL,
     DDZ."PRIORIDADE" AS PRIORIDADE,
     DDZ."ID_CONTROLE" AS ID_CONTROLE,
     DDZ."FLAG" AS FLAG,
     Cad_Linha."LINHA" AS Cad_Linha_LINHA
FROM
     "dbo"."Cad_Linha" Cad_Linha INNER JOIN "dbo"."Cad_Material" Cad_Material ON Cad_Linha."LINHA" = Cad_Material."MAT_LINHA"
     INNER JOIN "dbo"."DDZ" DDZ ON Cad_Material."MATERIAL" = DDZ."ID_M_MATERIAL"
WHERE MAT_LINHA = $P{linha} AND ID_M_MATERIAL = $P{perfil} AND DATA_INPUT  BETWEEN CONVERT(DATE, $P{dataini}, 111) AND CONVERT(DATE, $P{datafim}, 111)  and FLAG = $P{flag}
ORDER by DATA_INPUT, HORA_INPUT]]>
	</queryString>
	<field name="DDZ_ID" class="java.math.BigDecimal"/>
	<field name="DATA_INPUT" class="java.sql.Timestamp"/>
	<field name="HORA_INPUT" class="java.sql.Timestamp"/>
	<field name="OBSERVACAO" class="java.lang.String"/>
	<field name="TURNO" class="java.lang.String"/>
	<field name="ID_CAUSA_ID" class="java.math.BigDecimal"/>
	<field name="ID_M_MATERIAL" class="java.lang.Integer"/>
	<field name="QTD_SCRAP" class="java.lang.Double"/>
	<field name="QTD_SCRAP_REAIS" class="java.lang.Double"/>
	<field name="QTD_SCRAP_KG" class="java.lang.Double"/>
	<field name="VELOCIDADE" class="java.lang.Double"/>
	<field name="PESO" class="java.lang.Double"/>
	<field name="DATA_REAL" class="java.sql.Timestamp"/>
	<field name="PRIORIDADE" class="java.lang.Integer"/>
	<field name="ID_CONTROLE" class="java.lang.Integer"/>
	<field name="FLAG" class="java.lang.String"/>
	<field name="Cad_Linha_LINHA" class="java.lang.String"/>
	<variable name="variable1" class="java.lang.Integer" calculation="Count">
		<variableExpression><![CDATA[$F{DDZ_ID}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="120" splitType="Stretch">
			<image isUsingCache="true">
				<reportElement x="0" y="0" width="150" height="32" uuid="812fd85c-3a77-4c54-8efa-bcdaa3f88de5"/>
				<imageExpression><![CDATA[$P{logo}]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="170" y="23" width="161" height="32" uuid="eb030fea-a4a5-4e13-ac20-7aa007eb8617"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="15" isBold="true"/>
				</textElement>
				<text><![CDATA[Lista de lançamento - ]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="474" y="20" width="80" height="20" uuid="d5ad9f1e-a624-4795-af83-33ea0f6bd7fb"/>
				<textElement verticalAlignment="Middle">
					<font isUnderline="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{datafim}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="484" y="0" width="70" height="20" uuid="7a3c6bf7-cc0c-487c-8177-aa7eea77a5d3"/>
				<textElement verticalAlignment="Middle">
					<font isUnderline="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{dataini}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="331" y="23" width="69" height="32" uuid="cb510874-5f2b-4d60-969e-e5b20c3463a4"/>
				<textElement verticalAlignment="Middle">
					<font size="15" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{linha}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="428" y="0" width="56" height="20" uuid="de054a3a-b06c-4b3a-a56f-1d94884eac8a"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true" isUnderline="false"/>
				</textElement>
				<text><![CDATA[Data início:]]></text>
			</staticText>
			<staticText>
				<reportElement x="428" y="20" width="46" height="20" uuid="3b8d9938-8418-4ba2-a3ec-8c93e41bd836"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true" isUnderline="false"/>
				</textElement>
				<text><![CDATA[Data fim:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="85" width="170" height="20" uuid="303f05a4-26dd-459a-b47a-92360cb736b9"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Data/Hora]]></text>
			</staticText>
			<staticText>
				<reportElement x="289" y="85" width="268" height="20" uuid="185f7eaf-4ade-40cb-ba3c-4e6cff9891ba"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Observação]]></text>
			</staticText>
			<staticText>
				<reportElement x="171" y="85" width="118" height="20" uuid="017aea29-ea69-4bd1-9f6d-b088a353bc75"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Perfil]]></text>
			</staticText>
		</band>
	</title>
	<detail>
		<band height="33" splitType="Stretch">
			<rectangle>
				<reportElement stretchType="RelativeToBandHeight" x="0" y="0" width="555" height="33" backcolor="#EFEFEF" uuid="40d171fc-2e7d-481b-88af-806a348c42eb">
					<printWhenExpression><![CDATA[new Boolean (($V{COLUMN_COUNT}.intValue()%2)==0)]]></printWhenExpression>
				</reportElement>
				<graphicElement>
					<pen lineWidth="0.0"/>
				</graphicElement>
			</rectangle>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="21" y="0" width="70" height="20" uuid="d3cc2a3a-c085-4823-8229-cbfac376c62d"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{DATA_INPUT}]]></textFieldExpression>
			</textField>
			<textField pattern="HH:mm">
				<reportElement x="104" y="0" width="67" height="20" uuid="9b939024-6ec1-4e28-a9cd-cb38c89ae3e5"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{HORA_INPUT}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="289" y="0" width="268" height="20" uuid="848b75e2-6a93-446a-8019-bfdc70aac6dd"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{OBSERVACAO}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="91" y="0" width="13" height="20" uuid="b5c1f6da-4de2-4e67-b535-572bb92a32a8"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[-]]></text>
			</staticText>
			<textField>
				<reportElement x="171" y="0" width="118" height="20" uuid="736a49f6-2c91-4b91-95ed-c55ab454f96a"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{ID_M_MATERIAL}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="50">
			<staticText>
				<reportElement x="104" y="13" width="265" height="20" uuid="4ead6d72-2232-4e19-9611-188570a48fb4">
					<printWhenExpression><![CDATA[$P{flag} == 'E']]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="14"/>
				</textElement>
				<text><![CDATA[Quantidade de lançamentos realizados:]]></text>
			</staticText>
			<textField evaluationTime="Report">
				<reportElement x="366" y="13" width="100" height="20" forecolor="#FF0000" uuid="b73deac1-2198-4053-8aba-6ee5e27d47ce"/>
				<textElement verticalAlignment="Middle">
					<font size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{variable1}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="104" y="13" width="265" height="20" uuid="74ebcec5-0763-4a8e-8191-38b28202bcca">
					<printWhenExpression><![CDATA[$P{flag} == 'P']]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="14"/>
				</textElement>
				<text><![CDATA[Quantidade de paradas realizadas:]]></text>
			</staticText>
		</band>
	</columnFooter>
	<pageFooter>
		<band height="20" splitType="Stretch">
			<textField pattern="EEEEE dd MMMMM yyyy">
				<reportElement x="0" y="0" width="117" height="20" uuid="f055af6b-4cf3-400b-bf46-667f016ddec6"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="542" y="0" width="15" height="20" uuid="25e3b3d1-aab1-43ff-bd6b-04efc4614e08"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="474" y="0" width="68" height="20" uuid="51d65e2d-8c9a-4aae-924c-e42e05ae3239"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA["Pagina "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
